# Лабораторная работа 4. Файловая система, сигналы, потоки.

Знакомство с возможностями операционной системы по работе с файловой системой, многопоточные приложения, взаимодействию между потоками.

## Условие

Рекомендуемыми языками для разработки являются **C/C++** и **Rust**.

Требования к сборке проекта остаются такими же, как в предыдущей лабораторной работе.

Общая часть задания для всех вариантов: консольное приложение должно использовать возможности операционной системы по обеспечению многопоточности и корректно закрывать потоки, освобождать ресурсы, как минимум, при получении сигнала `SIGINT`.

## Варианты заданий

1. В рабочем каталоге лежат входные текстовые файлы.
    Каждый файл состоит из двух строк.
    В первой строке - число, обозначающее действие, а во второй - числа с плавающей точкой, разделенные пробелом.

    Действия могут быть следующими:

    - `1` - сложение
    - `2` - умножение
    - `3` - сумма квадратов

    Необходимо написать многопоточное приложение, которое выполнит требуемые действия над числами и сумму результатов запишет в отдельный файл.
    Название рабочего каталога и файла с результатами передаются в виде аргументов командной строки.

2. После запуска программы N потоков начинают писать в файл, заданный через аргумент командной строки, некоторый текст (строка) в вечном цикле.
    По нажатию клавиши `+` создаётся ещё один поток, по нажатию клавиши `-` удаляется последний добавленный. 
    Каждый поток пытается записать в файл свою уникальную строку. Процесс вывода должен быть синхронизирован таким образом, чтобы в файл писал не только один поток и в каждой строке файла была только одна строка определенного потока. Также нужно продемонстрировать "гонку потоков", то есть то, что происходит борьба между потоками за получение права первым начать запись в файл (помним про синхронизацию). 
    Пример. Три потока пишут в файл
        thread 1
        thread 2
        thread 3
        thread 2
        thread 1
        thread 3
    По сигналу освобождаем ресурсы, закрываем потоки.

## Ресурсы

- Michail Kerisk. The Linux programming interface. [Обзор на хабре](https://habrahabr.ru/company/piter/blog/282776/).
- Стивен Раго, У. Ричард Стивенс. UNIX. Профессиональное программирование, 3-е издание.
